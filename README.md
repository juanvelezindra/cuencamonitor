# Cuencamonitor
Código para el desarrollo de un prototipo de IoT que toma las señales enviadas por un dispositivo m5stack de medición de variables para una cuenca hidrográfica en áreas conexas de represas hidroeléctricas

![image](https://user-images.githubusercontent.com/86011220/132969427-606757a6-c363-4a21-8e6f-b13d58c7ae78.png)

El prototipo esta dividido en secciones para el desarrollo del código del dispositivo:
- Importación de las librerías
- Definición de función para el envío
- Definición de función para recibir la respuesta
- Declaración de variables
- Iniciar y conectar la wifi
- Fijar fecha y hora
- Obtener la dirección mac del dispositivo
- Inicialización de variables
- Instanciar el objeto de las mediciones del sensor
- Definción del objeto mqtt
- Creación del entorno gráfico 
- Ciclo infinito para la toma de las muestras del sensor y la fecha y hora y envío hacia la nube



Importación de las librerías

![image](https://user-images.githubusercontent.com/86011220/133913492-e3adc45f-5c09-403c-8dcf-0a4583298b67.png)


Definición de función para el envío

![image](https://user-images.githubusercontent.com/86011220/133913734-6f2618c4-b396-4aab-99cc-e1693f83bce4.png)


Definición de función para recibir la respuesta

![image](https://user-images.githubusercontent.com/86011220/133913744-6838c11b-722c-4f9c-86ec-852a97d0930a.png)


Declaración de variables

![image](https://user-images.githubusercontent.com/86011220/133913774-ed5b124d-d9d4-4d3a-8365-fc1f5caf2d6d.png)


Iniciar y conectar la wifi

![image](https://user-images.githubusercontent.com/86011220/133913785-1af32973-c26e-4e45-9919-f35721ae2371.png)


Fijar fecha y hora

![image](https://user-images.githubusercontent.com/86011220/133913789-54167a0c-9c14-40bb-9b4a-8158e0c1d611.png)


Obtener la dirección mac del dispositivo

![image](https://user-images.githubusercontent.com/86011220/133913796-f58083dc-8e99-466d-acc6-3e4736a4fb09.png)


Inicialización de variables

![image](https://user-images.githubusercontent.com/86011220/133913813-7eda931b-38be-4a01-ab95-35eb17b2741a.png)


Instanciar el objeto de las mediciones del sensor

![image](https://user-images.githubusercontent.com/86011220/133913821-f7c492f1-16f9-4424-ad24-a010a4a4648a.png)


Definción del objeto mqtt

![image](https://user-images.githubusercontent.com/86011220/133913824-bda24ffd-5f16-4040-8715-1f4cb65d86c9.png)


Creación del entorno gráfico 

![image](https://user-images.githubusercontent.com/86011220/133913829-55deb1d4-04e0-413a-8ca9-578cf42f606d.png)


Ciclo infinito para la toma de las muestras del sensor y la fecha y hora y envío hacia la nube

![image](https://user-images.githubusercontent.com/86011220/133913835-fd17d1ea-2f39-4b6a-9161-0fcc5717c5ae.png)

